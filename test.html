<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fake AI + Smart Search + Features</title>
  <style>
    /* Your existing styles here, unchanged */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #121212;
      color: #e0e0e0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      margin: 0;
    }
    .chat-box {
      max-width: 700px;
      width: 100%;
      background: #1e1e1e;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 150, 136, 0.7);
      padding: 25px;
      display: flex;
      flex-direction: column;
      height: 90vh;
    }
    h2 {
      margin-bottom: 15px;
      color: #00bfa5;
      font-weight: 700;
      font-size: 24px;
    }
    #chatArea {
      flex-grow: 1;
      overflow-y: auto;
      border: 1px solid #00bfa5;
      background: #121212;
      padding: 20px;
      border-radius: 12px;
      white-space: pre-wrap;
      margin-bottom: 20px;
      font-size: 16px;
      line-height: 1.5;
      scrollbar-width: thin;
      scrollbar-color: #00bfa5 #1e1e1e;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    #chatArea::-webkit-scrollbar {
      width: 8px;
    }
    #chatArea::-webkit-scrollbar-track {
      background: #1e1e1e;
    }
    #chatArea::-webkit-scrollbar-thumb {
      background-color: #00bfa5;
      border-radius: 10px;
    }
    .message {
      max-width: 75%;
      padding: 12px 18px;
      border-radius: 18px;
      position: relative;
      word-wrap: break-word;
      white-space: normal;
    }
    .user {
      background: #004d40;
      color: #a5d6a7;
      align-self: flex-end;
      text-align: right;
      border-bottom-right-radius: 4px;
    }
    .bot {
      background: #00695c;
      color: #b2dfdb;
      align-self: flex-start;
      text-align: left;
      border-bottom-left-radius: 4px;
    }
    form {
      display: flex;
      gap: 15px;
    }
    input[type="text"] {
      flex-grow: 1;
      padding: 15px 20px;
      font-size: 16px;
      border-radius: 30px;
      border: 2px solid #00bfa5;
      background: #121212;
      color: #e0e0e0;
      outline: none;
      transition: border-color 0.3s;
    }
    input[type="text"]:focus {
      border-color: #00e5ff;
    }
    input[type="submit"] {
      background-color: #00bfa5;
      border: none;
      padding: 15px 30px;
      font-size: 16px;
      color: #004d40;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 700;
      transition: background-color 0.3s;
    }
    input[type="submit"]:hover {
      background-color: #00e5ff;
      color: #00332b;
    }
    a.google-link {
      color: #00bfa5;
      text-decoration: underline;
      cursor: pointer;
      display: inline-block;
      margin-top: 5px;
    }
    @media (max-width: 600px) {
      .chat-box {
        height: 80vh;
        padding: 20px;
      }
      input[type="text"], input[type="submit"] {
        font-size: 14px;
        padding: 12px 15px;
      }
    }
  </style>
</head>
<body>

  <div class="chat-box">
    <h2>Chat with Smart Fake AI 🤖</h2>
    <div id="chatArea"></div>

    <form id="chatForm" autocomplete="off">
      <input type="text" id="input" placeholder="Type your question..." required />
      <input type="submit" value="Send" />
    </form>
  </div>

  <script>
    const chatArea = document.getElementById('chatArea');
    const chatForm = document.getElementById('chatForm');
    const input = document.getElementById('input');

    function addMessage(content, type) {
      const div = document.createElement('div');
      div.className = 'message ' + type;
      if (typeof content === 'string') {
        div.textContent = content;
      } else {
        div.appendChild(content);
      }
      chatArea.appendChild(div);
      chatArea.scrollTop = chatArea.scrollHeight;
    }

    chatForm.addEventListener('submit', e => {
      e.preventDefault();
      const text = input.value.trim();
      if (!text) return;

      addMessage("You: " + text, 'user');
      input.value = "";
      respond(text);
    });

    async function respond(message) {
      const lower = message.toLowerCase();
      let handled = true;
      let response = "";

      if (lower.includes("hello") || lower.includes("hi")) {
        response = "Hello! How can I help you today?";
      } else if (lower.includes("your name")) {
        response = "I'm your friendly mini AI assistant.";
      } else if (lower.includes("how are you")) {
        response = "I'm doing great, thanks for asking! How about you?";
      } else if (lower.includes("what time") || lower.includes("current time")) {
        const now = new Date();
        response = `It's currently ${now.toLocaleTimeString()}.`;
      } else if (lower.includes("weather")) {
        response = "I can't check the weather right now, but I hope it's nice where you are!";
      } else if (lower.includes("joke")) {
        const jokes = [
          "Why don't scientists trust atoms? Because they make up everything!",
          "I told my computer I needed a break, and it said 'No problem — I'll go to sleep.'",
          "Why was the math book sad? Because it had too many problems.",
        ];
        response = jokes[Math.floor(Math.random() * jokes.length)];
      } else if (lower.includes("thank you") || lower.includes("thanks")) {
        response = "You're welcome! Happy to help.";
      } else if (lower.includes("bye") || lower.includes("goodbye")) {
        response = "Goodbye! Have a wonderful day!";
      } else if (lower.includes("love you")) {
        response = "I appreciate your kindness! ❤️";
      } else if (lower.includes("who made you") || lower.includes("who created you")) {
        response = "I was crafted by a talented developer just for you!";
      } else if (lower.includes("what can you do")) {
        response = "I can chat with you and fetch interesting facts from the web. Try asking me something!";
      } 
      // NEW FEATURES START HERE
      else if (lower.match(/^(\d+(\.\d+)?\s*[\+\-\*\/]\s*\d+(\.\d+)?)$/)) {
        try {
          const expression = message.replace(/[^-()\d/*+.]/g, '');
          const result = eval(expression); 
          response = `The result is ${result}.`;
        } catch {
          response = "Sorry, I couldn't calculate that.";
        }
      } else if (lower.includes("date") && (lower.includes("today") || lower.includes("current"))) {
        const now = new Date();
        response = `Today's date is ${now.toLocaleDateString()}.`;
      } else if (lower.includes("trivia")) {
        const triviaFacts = [
          "Did you know? Honey never spoils.",
          "A group of flamingos is called a flamboyance.",
          "Octopuses have three hearts.",
          "Bananas are berries, but strawberries aren't.",
          "There are more stars in the universe than grains of sand on Earth."
        ];
        response = triviaFacts[Math.floor(Math.random() * triviaFacts.length)];
      } else if (lower.includes("compliment")) {
        const compliments = [
          "You're amazing just the way you are!",
          "Your positivity is infectious!",
          "You have a great sense of humor!",
          "You're a fantastic conversationalist!",
          "Your creativity shines through!"
        ];
        response = compliments[Math.floor(Math.random() * compliments.length)];
      }
      // END NEW FEATURES
      else {
        handled = false;
      }

      if (handled) {
        addMessage("AI: " + response, 'bot');
        return;
      }

      addMessage("AI: Hmm... let me check something for you...", 'bot');

      try {
        const numberFactKeywords = ["number", "fact", "math", "calculate", "date", "year"];
        const isNumberQuery = numberFactKeywords.some(kw => lower.includes(kw)) && /\d/.test(message);

        if (isNumberQuery) {
          const numberMatch = message.match(/\d+/);
          const number = numberMatch ? numberMatch[0] : "random";
          const numbersApiUrl = `http://numbersapi.com/${number}?json`;
          const resNum = await fetch(numbersApiUrl);
          if (resNum.ok) {
            const dataNum = await resNum.json();
            if (dataNum && dataNum.text) {
              addMessage("AI: " + dataNum.text, 'bot');
              return;
            }
          }
        }

        const wikiTopic = extractWikiTopic(message);
        if (wikiTopic) {
          const wikiUrl = `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(wikiTopic)}`;
          const resWiki = await fetch(wikiUrl);
          if (resWiki.ok) {
            const dataWiki = await resWiki.json();
            if (dataWiki.extract) {
              addMessage("AI: " + dataWiki.extract, 'bot');
              return;
            }
          }
        }

        const duckUrl = `https://api.duckduckgo.com/?q=${encodeURIComponent(message)}&format=json&no_redirect=1`;
        const resDuck = await fetch(duckUrl);
        if (resDuck.ok) {
          const dataDuck = await resDuck.json();
          if (dataDuck.AbstractText) {
            addMessage("AI: " + dataDuck.AbstractText, 'bot');
            return;
          } else if (dataDuck.Answer) {
            addMessage("AI: " + dataDuck.Answer, 'bot');
            return;
          } else if (dataDuck.RelatedTopics && dataDuck.RelatedTopics.length > 0 && dataDuck.RelatedTopics[0].Text) {
            addMessage("AI: " + dataDuck.RelatedTopics[0].Text, 'bot');
            return;
          }
        }

        if (lower.includes("advice")) {
          const adviceRes = await fetch('https://api.adviceslip.com/advice');
          if (adviceRes.ok) {
            const adviceData = await adviceRes.json();
            addMessage("AI: " + adviceData.slip.advice, 'bot');
            return;
          }
        }

        const googleLink = document.createElement('a');
        googleLink.href = `https://www.google.com/search?q=${encodeURIComponent(message)}`;
        googleLink.textContent = "Search on Google";
        googleLink.target = "_blank";
        googleLink.rel = "noopener noreferrer";
        googleLink.className = "google-link";

        addMessage("AI: Sorry, I couldn't find an instant answer. You can try this:", 'bot');
        addMessage(googleLink, 'bot');

      } catch (err) {
        console.error(err);
        addMessage("AI: Something went wrong while searching.", 'bot');
      }
    }

    function extractWikiTopic(question) {
      let cleaned = question.toLowerCase()
        .replace(/^(what|who|when|where|why|how|is|are|does|do|can|could|should|would|tell me about|explain|define|give me|show me|find|search for)/gi, '')
        .trim();

      cleaned = cleaned.replace(/[?.,!]/g, '');

      const words = cleaned.split(' ');
      if (words.length === 0) return null;

      return words.slice(0, 3).join(' ');
    }
  </script>

</body>
</html>